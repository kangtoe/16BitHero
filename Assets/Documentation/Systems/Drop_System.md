# Drop System - 드롭 시스템 상세 기획

## 📋 문서 정보
- **작성일**: 2025-12-09
- **버전**: 0.1
- **대상**: 기획자, 디자이너
- **관련 문서**:
  - [Drop_System_Technical.md](../Technical/Drop_System_Technical.md) - 기술 문서
  - [Wave_System.md](Wave_System.md) - 웨이브 시스템

---

## 💎 드롭 시스템 개요

### 핵심 컨셉
**드롭 오브젝트 (Drop Objects)**는 전투 중 필드에 생성되는 물리 오브젝트입니다.
- 적 처치 시 드롭
- 플레이어가 접촉하여 획득
- 즉시 효과 발동 후 소멸

### 자동 수집 시스템
- 플레이어 근처 일정 범위 내 드롭 오브젝트는 자동으로 끌어당김
- 수집 범위는 스탯으로 조정 가능 (향후 구현)

---

## 📦 1. 드롭 오브젝트 목록

### 1.1 현재 구현된 드롭 오브젝트

| 오브젝트 | 효과 | 드롭 확률 | 구현 상태 |
|:---:|:---|:---:|:---:|
| **코인 (Coin)** | 골드 1~3 획득 | 높음 (70~80%) | ✅ |
| **포션 (Potion)** | 체력 10~25% 회복 | 중간 (15~20%) | ✅ |
| **상자 (Chest)** | 랜덤 보상 (골드/아이템) | 낮음 (5~10%) | ✅ |
| **다이아몬드 (Diamond)** | 프리미엄 화폐 1개 획득 | 매우 낮음 (0.1%) | ✅ |

#### 상세 스펙

**코인 (Coin)**
- 효과: 골드 1~3 획득
- 드롭량: 적 난이도에 따라 1~5개
- 특징: 가장 기본적인 드롭
- 용도: 상점에서 무기/아이템 구매

**포션 (Potion)**
- 효과: 현재 체력의 10~25% 회복
- 드롭 확률 보정: 플레이어 체력이 낮을수록 확률 증가
- 특징: 생존에 필수적인 회복 수단
- 밸런싱: 체력 50% 이하일 때 드롭 확률 +50%

**상자 (Chest)**
- 효과: 랜덤 보상
  - 골드 10~30 (70% 확률)
  - 경험치 대량 획득 (20% 확률)
  - 즉시 버프 효과 (10% 확률)
- 드롭 조건: 엘리트 적 또는 확률 기반
- 특징: 리스크/리워드 요소

**다이아몬드 (Diamond)**
- 효과: 프리미엄 화폐 1개 획득
- 드롭 확률: 0.1% (매우 희귀)
- 쿨다운: 1초 (연속 드롭 방지)
- 용도: 메타 진행 시스템 (영구 업그레이드 등)

---

### 1.2 추가 가능한 드롭 오브젝트 (제안)

| 오브젝트 | 효과 | 드롭 확률 | 우선순위 |
|:---:|:---|:---:|:---:|
| **경험치 젬 (XP Gem)** | 경험치 1~5 획득 | 높음 (50~60%) | ⭐ 높음 |
| **자석 (Magnet)** | 5초간 수집 범위 2배 증가 | 낮음 (5%) | 중간 |
| **무적 버프 (Shield)** | 3초간 무적 상태 | 매우 낮음 (1%) | 중간 |
| **속도 버프 (Speed Boost)** | 5초간 이동속도 +50% | 낮음 (5%) | 낮음 |
| **공격력 버프 (Power Up)** | 10초간 공격력 +30% | 낮음 (5%) | 중간 |
| **폭탄 (Bomb)** | 즉시 화면 내 모든 적에게 데미지 | 매우 낮음 (2%) | 낮음 |

#### 추가 오브젝트 상세 설명

**경험치 젬 (XP Gem)** ⭐ 우선순위 높음
- 효과: 경험치 1~5 획득
- 드롭량: 적 타입에 따라 다름
  - 일반 적: 1개
  - 엘리트 적: 3~5개
- 레벨업 시스템과 연동
- 브로타토의 핵심 메커니즘

**자석 (Magnet)**
- 효과: 5초간 드롭 오브젝트 자동 수집 범위 2배 증가
- 비주얼: 플레이어 주변 원형 이펙트
- 전략적 활용: 위험 지역의 드롭 안전하게 수집

**무적 버프 (Shield)**
- 효과: 3초간 모든 데미지 무효
- 비주얼: 플레이어 주변 보호막 이펙트
- 밸런싱: 쿨다운 5초 (연속 획득 방지)

**속도 버프 (Speed Boost)**
- 효과: 5초간 이동속도 +50%
- 비주얼: 잔상 효과
- 용도: 위기 상황 회피

**공격력 버프 (Power Up)**
- 효과: 10초간 공격력 +30%
- 비주얼: 무기 빛나는 효과
- 용도: 엘리트 적이나 보스전

**폭탄 (Bomb)**
- 효과: 즉시 화면 내 모든 적에게 50 고정 데미지
- 비주얼: 화면 전체 폭발 이펙트
- 용도: 위급 상황 긴급 대처

---

## 🎲 2. 드롭 메커니즘

### 2.1 드롭 확률 시스템

#### 기본 확률 공식
```
실제 드롭 확률 = 기본 드롭 확률 × (1 + Luck / 100)
```

#### 예시
- 기본 코인 드롭 확률: 75%
- 플레이어 Luck 스탯: 20
- 실제 드롭 확률: 75% × (1 + 20/100) = 90%

### 2.2 드롭 수량 결정

#### 코인 드롭 수량
- 일반 적: 1~2개
- 강화 적: 2~3개
- 엘리트 적: 3~5개
- 보스 적: 10~20개

#### 경험치 젬 드롭 수량 (제안)
- 일반 적: 1개
- 강화 적: 2개
- 엘리트 적: 3~5개
- 보스 적: 10~15개

### 2.3 조건부 드롭 확률

#### 포션 드롭 확률 보정
```
플레이어 체력 비율에 따른 확률 증가:
- 체력 100~75%: 기본 확률 (15%)
- 체력 75~50%: +25% → 18.75%
- 체력 50~25%: +50% → 22.5%
- 체력 25~0%: +100% → 30%
```

#### 상자 드롭 조건
1. **엘리트 적 처치**: 100% 드롭
2. **일반 적 처치**: 5~10% 확률
3. **웨이브 종료 시**: 보너스 상자 1개 (선택적)

---

## 🌍 3. 드롭 위치 및 물리

### 3.1 드롭 위치
- **기본 위치**: 적 사망 위치
- **흩어짐**: 랜덤 방향으로 분산 드롭

### 3.2 물리 시스템
- **Rigidbody2D** 사용
- **Force 적용**: 랜덤 방향으로 Impulse Force
- **Force 강도**: 2.0 ~ 5.0 (드롭 수량에 따라 조정)
- **마찰력**: 적용하여 자연스러운 정지

#### 드롭 수량에 따른 Force 스케일링
```
드롭 1개: Force 강도 0.5배
드롭 5개: Force 강도 1.0배
드롭 10개 이상: Force 강도 1.5배
```

### 3.3 시각적 효과
- 드롭 시 파티클 효과
- 땅에 떨어질 때 바운스 효과
- 수집 시 플레이어를 향해 이동하는 트윈 애니메이션

---

## 🧲 4. 자동 수집 시스템

### 4.1 수집 범위
- **기본 수집 범위**: 1.5 유닛 (플레이어 중심)
- **자석 버프 사용 시**: 3.0 유닛 (2배)
- **향후 확장**: 스탯으로 조정 가능

### 4.2 수집 메커니즘
1. 플레이어 근처 드롭 오브젝트 감지 (Physics2D.OverlapCircle)
2. 수집 범위 내 오브젝트를 플레이어 방향으로 끌어당김
3. 플레이어와 충돌 시 효과 발동 및 소멸

### 4.3 수집 속도
- **기본 속도**: 5.0 유닛/초
- **가속도**: 플레이어에게 가까워질수록 속도 증가
- **최대 속도**: 10.0 유닛/초

---

## 💰 5. 경제 밸런싱

### 5.1 웨이브당 평균 골드 획득

| 웨이브 | 적 수 | 평균 골드 드롭 | 총 골드 |
|:---:|:---:|:---:|:---:|
| 1~3 | 15~25 | 4~6 | 80~120 |
| 4~7 | 25~40 | 5~8 | 150~250 |
| 8~15 | 40~60 | 7~10 | 300~500 |
| 16+ | 60~100 | 8~12 | 500~800 |

### 5.2 골드 드롭 공식 (제안)
```
적 1마리당 평균 골드 = 기본 골드 × 웨이브 배율 × Luck 보정

기본 골드: 2~4
웨이브 배율: 1 + (웨이브 수 × 0.1)
Luck 보정: 1 + (Luck / 100)
```

### 5.3 경험치 밸런싱 (제안)

| 웨이브 | 적 수 | 평균 경험치 | 총 경험치 | 레벨업 |
|:---:|:---:|:---:|:---:|:---:|
| 1~3 | 15~25 | 1~2 | 30~50 | 1회 |
| 4~7 | 25~40 | 2~3 | 75~120 | 1~2회 |
| 8~15 | 40~60 | 3~5 | 180~300 | 2~3회 |
| 16+ | 60~100 | 5~8 | 400~800 | 3~5회 |

---

## 🎯 6. 드롭 테이블 (Drop Table)

### 6.1 일반 적 드롭 테이블

| 오브젝트 | 확률 | 수량 |
|:---:|:---:|:---:|
| 코인 | 75% | 1~2 |
| 경험치 젬 | 50% | 1 |
| 포션 | 15% | 1 |
| 상자 | 5% | 1 |
| 자석 | 5% | 1 |
| 다이아몬드 | 0.1% | 1 |

### 6.2 엘리트 적 드롭 테이블

| 오브젝트 | 확률 | 수량 |
|:---:|:---:|:---:|
| 코인 | 100% | 3~5 |
| 경험치 젬 | 100% | 3~5 |
| 포션 | 30% | 1~2 |
| 상자 | 100% | 1 |
| 자석 | 10% | 1 |
| 무적 버프 | 5% | 1 |
| 다이아몬드 | 1% | 1 |

### 6.3 보스 적 드롭 테이블 (향후)

| 오브젝트 | 확률 | 수량 |
|:---:|:---:|:---:|
| 코인 | 100% | 10~20 |
| 경험치 젬 | 100% | 10~15 |
| 상자 | 100% | 2~3 |
| 다이아몬드 | 50% | 1~3 |
| 특별 보상 | 100% | 1 |

---

## 📊 7. 드롭 비주얼 가이드

### 7.1 드롭 오브젝트 외형

| 오브젝트 | 색상 | 크기 | 이펙트 |
|:---:|:---:|:---:|:---|
| 코인 | 골드 | 작음 | 반짝임 |
| 경험치 젬 | 파랑 | 작음 | 빛남 |
| 포션 | 빨강 | 중간 | 액체 효과 |
| 상자 | 갈색 | 중간 | 잠금 장치 |
| 다이아몬드 | 하늘색 | 작음 | 강한 빛 |
| 자석 | 회색 | 작음 | 자기장 효과 |
| 버프 | 다양 | 중간 | 아이콘 표시 |

### 7.2 수집 시 이펙트
- **파티클**: 오브젝트가 플레이어에게 흡수되는 효과
- **사운드**: 오브젝트 타입별 고유 사운드
- **UI 피드백**: 획득한 양 표시 ("+5 Gold", "+10 XP")

---

## 🔧 8. 참고사항

### 8.1 Brotato와의 비교
- **유사점**:
  - 경험치 젬 시스템
  - 골드 자동 수집
  - 드롭 오브젝트 물리 기반

- **차이점**:
  - 16비트 픽셀 아트 스타일
  - (향후) 고유 드롭 오브젝트 추가

### 8.2 확장 가능성
- **희귀 드롭**: 특별한 효과를 가진 희귀 오브젝트
- **연속 수집 보너스**: 일정 시간 내 많은 오브젝트 수집 시 보너스
- **드롭 배율 이벤트**: 특정 웨이브에서 드롭 확률/수량 증가
- **저주받은 드롭**: 강력한 효과 + 패널티

---

## 📞 문서 관리

### 업데이트 이력
- 2025-12-09: 초안 작성 (Item_System.md에서 분리)

### 다음 작업
1. 경험치 젬 시스템 상세 기획
2. 버프 오브젝트 상세 기획
3. 드롭 비주얼 스펙 확정

### 관련 문서
- [Drop_System_Technical.md](../Technical/Drop_System_Technical.md) - 기술 구현 문서
- [Wave_System.md](Wave_System.md) - 웨이브 시스템 기획
- [Shop_System.md](Shop_System.md) - 상점 시스템 기획
- [GDD_Overview.md](../GDD_Overview.md) - 게임 전체 기획
