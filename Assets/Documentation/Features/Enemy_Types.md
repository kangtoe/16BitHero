# Enemy Types - 적 종류 상세 기획

## 📋 문서 정보
- **작성일**: 2025-12-04
- **버전**: 0.1
- **관련 시스템**: Enemy System, Wave System, Drop System

---

## 🎯 적 디자인 철학

### 핵심 원칙
1. **명확한 역할**: 각 적은 고유한 전투 패턴과 역할을 가짐
2. **시각적 구분**: 행동 패턴을 색상/크기로 직관적으로 표현
3. **점진적 난이도**: 웨이브가 진행될수록 위험한 적 등장
4. **전략적 선택**: 플레이어가 우선순위를 정해야 하는 상황 유도

### 난이도 등급
- **⭐ Tier 1**: 기본 적 (초반 웨이브)
- **⭐⭐ Tier 2**: 중급 적 (중반 웨이브)
- **⭐⭐⭐ Tier 3**: 고급 적 (후반 웨이브)
- **👑 Boss**: 보스 (특정 웨이브)

---

## 👾 적 타입 목록

### 현재 구현된 적

#### 1. **기본 추적형 적** (EnemyBase)
**난이도**: ⭐ Tier 1  
**구현 상태**: ✅ 완료

**특징**:
- 가장 기본적인 추적형 적
- **전투 역할**: 기본 위협, 수적 우위로 압박

**스탯 (기준)**:
```
체력: 10
이동속도: 1.0
공격력: 1
공격 주기: 1초
공격 범위: 0.45 (Medium)
드랍: 코인 1개
```

**AI 패턴**:
1. 플레이어 위치 감지
2. 직선으로 추적 (이동속도 1.0)
3. 0.5 거리 이내 도달 시 정지
4. 공격 범위(0.45) 내 진입 시 근접 공격 (데미지 1)

---

#### 2. **배회형 적** (WobbleEnemy)
**난이도**: ⭐ Tier 1  
**구현 상태**: ✅ 완료

**특징**:
- 예측 불가능한 움직임의 배회형 적
- **전투 역할**: 회피 난이도 증가, 플레이어 동선 방해

**스탯**:
```
체력: 8
이동속도: 1.2
공격력: 1
공격 주기: 1초
공격 범위: 0.45 (Medium)
드랍: 코인 1개
```

**AI 패턴**:
1. 랜덤 방향 설정 (원형 범위 내)
2. 해당 방향으로 이동 (이동속도 1.2)
3. 벽 충돌 시 새로운 랜덤 방향 설정
4. 플레이어와 접촉 시 근접 공격 (데미지 1)
5. **플레이어를 추적하지 않음**

---

### 🚧 계획된 적 (우선순위 순)

#### 3. **원거리 공격형 적** (RangedEnemy)
**난이도**: ⭐⭐ Tier 2  
**구현 상태**: ✅ 기본 구현 완료 (고급 AI는 TODO)

**현재 구현 상태**:
- ✅ **RangedEnemy 클래스**: 독립적인 원거리 적 (무기 시스템 의존성 제거)
- ✅ **경고 시스템**: 공격 0.5초 전 '!' 표시로 플레이어에게 예고
- ✅ **투사체 발사**: Bullet 오브젝트 풀링으로 효율적 발사
- ✅ **거리 기반 이동**: 공격 범위 내에서 정지, 범위 밖이면 접근
- ❌ **고급 거리 관리 AI**: 최적 거리 유지 및 후퇴 로직 (TODO)

**특징**:
- 거리를 유지하며 투사체로 공격하는 원거리 적
- **전투 역할**: 원거리 압박, 플레이어 접근 방해
- **핵심 메커니즘**: 공격 전 경고 표시로 회피 가능

**제안 스탯**:
```
체력: 6
이동속도: 0.8
공격력: 2
공격 주기: 2초
공격 범위: 5.0
투사체 속도: 3.0
경고 시간: 0.5초
드랍: 코인 2개
```

**AI 패턴**:

**현재 구현 (기본)**:
1. 플레이어와의 거리 체크 (매 프레임)
2. **거리 > 공격 범위**: 플레이어에게 접근 ✅
3. **거리 <= 공격 범위**: 정지 후 공격 ✅
   - 머리 위에 '!' 경고 표시 (0.5초) ✅
   - 투사체 발사 (Bullet 사용) ✅

**향후 개선 (고급 AI)**:
- **최적 거리 유지 (3.0~5.0)**: 너무 가까우면 후퇴, 너무 멀면 접근
- **후퇴 로직**: 플레이어가 3.0 미만 거리에 있을 때 도망
- **측면 이동**: 일정 거리 유지하며 좌우 이동

**구현 완료 요소**:
- ✅ 투사체 프리팹 (Bullet 클래스 + 오브젝트 풀링)
- ✅ 경고 UI 스프라이트 ('!')
- ✅ 기본 거리 기반 이동 로직
- ✅ 독립적인 RangedEnemy 클래스

---

#### 4. **돌격형 적** (ChargerEnemy)
**난이도**: ⭐⭐ Tier 2  
**구현 상태**: ✅ 기본 구현 완료

**현재 구현 상태**:
- ✅ **ChargerEnemy 클래스**: 상태 머신 기반 돌진 시스템 (Normal/Preparing/Charging)
- ✅ **돌진 준비**: 1초 경고 시간 + 시각 효과 (붉은색 점멸)
- ✅ **고속 돌진**: 방향 고정 후 고속 이동
- ✅ **쿨다운 관리**: 돌진 후 3초 대기
- ❌ **벽 충돌 감지**: 미구현 (TODO)
- ❌ **고급 효과**: 떨림 애니메이션, 파티클 이펙트 (TODO)

**특징**:
- 준비 후 고속 돌진하는 공격형 적
- **전투 역할**: 고데미지 위협, 플레이어 위치 강제 이동
- **핵심 메커니즘**: 돌진 준비 시간 동안 회피 가능, 벽 충돌 시 무방비

**제안 스탯**:
```
체력: 15
이동속도: 0.6 (평소) / 4.0 (돌진)
공격력: 3
돌진 준비 시간: 1초
돌진 지속 시간: 1.5초
돌진 쿨다운: 3초
기절 시간: 1초 (벽 충돌 시)
드랍: 코인 3개
```

**AI 패턴**:
1. 플레이어 추적 (이동속도 0.6) ✅
2. 거리 6.0 이내 진입 시 돌진 준비 ✅
   - 1초간 정지 (시각 효과: 붉은 색 점멸) ✅
   - 돌진 방향 고정 (플레이어 현재 위치) ✅
3. 고속 돌진 (이동속도 4.0, 1.5초 지속) ✅
4. 돌진 중 플레이어 접촉 시 공격 (데미지 3 + 넉백) ✅
5. 벽 충돌 시 1초간 기절 (무방비, 이동/공격 불가) ❌ TODO
6. 돌진 쿨다운 3초 ✅

**구현 완료 요소**:
- ✅ 돌진 준비 시각 효과 (색상 점멸)
- ✅ 경고 인디케이터 ('!')
- ✅ 상태 머신 (Normal/Preparing/Charging)
- ❌ 벽 충돌 감지 (TODO)
- ❌ 기절 상태 (TODO)
- ❌ 떨림 애니메이션 (TODO)

---

#### 5. **탱커형 적** (TankEnemy)
**난이도**: ⭐⭐ Tier 2  
**구현 상태**: ✅ Phase 1 적용 (기본 시스템 활용)

**참고**: 현재는 `EnemyBase`에서 체력만 높게 설정하여 구현. 추후 데미지 산출 공식 수정(방어력 시스템) 시 메커니즘 변경/확장 예정.

**특징**:
- 높은 체력을 가진 탱커형 적
- **전투 역할**: 다른 적들의 "벽", 플레이어 화력 분산
- **핵심 메커니즘**: 높은 체력으로 오래 버팀

**제안 스탯**:
```
[Phase 1 - 간소화 버전]
체력: 80 (높은 체력으로 대체)
이동속도: 0.4
공격력: 2
공격 주기: 1.5초
크기: Large
드랍: 코인 5개

[Phase 2 - 방어력 추가 시]
체력: 50
방어력: 50% (받는 데미지 절반)
→ 실질 체력 100 상당
```

**AI 패턴**:
1. 플레이어 직선 추적 (이동속도 0.4, 매우 느림)
2. 0.5 거리 이내 도달 시 정지
3. 공격 범위(0.65, Large) 내 진입 시 근접 공격 (데미지 2)

**구현 계획**:
- **Phase 1**: 체력만 높게 설정 (간단)
- **Phase 2**: 방어력 시스템 추가 (무기/아이템 다양화 후)
  - CharacterBase에 armor 필드 추가
  - 데미지 감소 계산 로직
  - 관통력 무기/아이템 추가

---

#### 6. **분열형 적** (SplitterEnemy)
**난이도**: ⭐⭐ Tier 2  
**구현 상태**: ✅ 기본 구현 완료

**현재 구현 상태**:
- ✅ **SplitterEnemy 클래스**: 사망 시 작은 적 생성
- ✅ **랜덤 분열**: 2~3마리 랜덤 생성
- ✅ **자식 적**: EnemyBase 프리팹 사용 (무한 분열 방지)
- ❌ **시각 효과**: 분열 파티클, 사운드 (TODO)

**특징**:
- 처치 시 여러 마리로 분열하는 적
- **전투 역할**: 적 수 증가, 지속적인 위협
- **핵심 메커니즘**: 1마리 처치 → 2~3마리 생성 (총 위협도 증가)

**제안 스탯**:
```
[부모 적]
체력: 12
이동속도: 0.8
공격력: 1
크기: Medium
드랍: 코인 2개

[분열된 적]
체력: 3
이동속도: 1.5
공격력: 1
크기: Small
드랍: 코인 1개
분열 수: 2~3마리
```

**AI 패턴**:
**[부모 적]**
1. 플레이어 직선 추적 (이동속도 0.8) ✅
2. 근접 공격 (데미지 1) ✅
3. **사망 시**: 작은 적 2~3마리 생성 (랜덤) ✅

**[분열된 작은 적]**
1. 플레이어 빠르게 추적 (이동속도 1.5) ✅
2. 근접 공격 (데미지 1) ✅
3. 사망 시 추가 분열 없음 ✅

**구현 완료 요소**:
- ✅ 사망 시 적 생성 로직
- ✅ 작은 적 프리팹 (EnemyBase 사용)
- ✅ 랜덤 생성 위치
- ❌ 분열 시각 효과 (TODO)

---

#### 7. **버프형 적** (BufferEnemy)
**난이도**: ⭐⭐⭐ Tier 3  
**구현 상태**: ✅ 기본 구현 완료

**현재 구현 상태**:
- ✅ **BufferEnemy 클래스**: 버프 오라 및 도망 AI 구현
- ✅ **버프 시스템**: EnemyBase에 버프 로직 통합 (공/이속 증가)
- ✅ **범위 버프**: 0.5초마다 주변 적에게 버프 갱신
- ✅ **AI**: 플레이어와 거리 유지하며 아군 지원
- ❌ **시각 효과**: 오라 파티클 (Gizmos로만 구현됨)

**특징**:
- 주변 적들을 강화하는 지원형 적
- **전투 역할**: 다른 적들의 위협도 증폭, 최우선 처치 대상
- **핵심 메커니즘**: 범위 내 적 공격력 +50%, 이동속도 +30%

**제안 스탯**:
```
체력: 8
이동속도: 1.2
공격력: 0 (공격 안 함)
버프 범위: 4.0
버프 효과: 공격력 +50%, 이동속도 +30%
드랍: 코인 5개
```

**AI 패턴**:
1. 플레이어로부터 도망 (역추적, 이동속도 1.2) ✅
2. 범위(4.0) 내 모든 적에게 버프 적용 (지속) ✅
   - 공격력 +50% ✅
   - 이동속도 +30% ✅
   - 시각 효과: 노란색 변경 ✅
3. 직접 공격하지 않음 (공격력 0) ✅
4. 플레이어와 일정 거리(5.0) 유지 시도 ✅

**구현 완료 요소**:
- ✅ 버프 시스템 (EnemyBase)
- ✅ 버프 오라 로직 (BufferEnemy)
- ✅ 거리 유지 AI
- 역추적 AI

---

#### 8. **회복형 적** (HealerEnemy)
**난이도**: ⭐⭐⭐ Tier 3  
**구현 상태**: ⏸️ 보류 (스크립트 구현됨, 인게임 미사용)

**참고**: 스크립타 구현은 되었으나(`HealerEnemy.cs`), 실제 게임플레이 재미/밸런스 문제로 현재 사용하지 않음. 향후 필요 시 추가 가능.

**특징**:
- 주변 적들을 치료하는 힐러형 적
- **전투 역할**: 적 생존력 증가, 최우선 처치 대상
- **핵심 메커니즘**: 주기적으로 범위 내 적 회복 (5 HP/3초)

**제안 스탯**:
```
체력: 5
이동속도: 1.5
공격력: 0 (공격 안 함)
회복 범위: 3.0
회복량: 5 HP
회복 주기: 3초
드랍: 코인 8개, 포션 1개
```

**AI 패턴**:
1. 플레이어로부터 도망 (역추적, 이동속도 1.5)
2. 3초마다 회복 스킬 발동
   - 범위(3.0) 내 체력이 가장 낮은 적 회복 (5 HP)
   - 시각 효과: 분홍색 십자가 이펙트
3. 직접 공격하지 않음 (공격력 0)
4. 플레이어와 최대한 거리 유지

**구현 필요 요소**:
- 적 회복 로직
- 회복 이펙트
- 역추적 AI

---

#### 9. **폭발형 적** (ExploderEnemy)
**난이도**: ⭐⭐⭐ Tier 3  
**구현 상태**: 🚧 부분 구현 (기본 로직 완료, 발사체 추가 필요)

**특징**:
- 플레이어에게 접근하여 자폭하는 자살 공격형 적
- **전투 역할**: 고위험 위협, 공간 압박, 2차 회피 요구 (폭발+발사체)
- **핵심 메커니즘**: 
  - 일정 거리 진입 시 자폭 시퀀스 가동 (취소 불가, CC 무시)
  - 폭발 시 광역 데미지 + **사방으로 발사체 발사**

**제안 스탯**:
```
체력: 6
이동속도: 2.0 (평소)
폭발 데미지: 5
폭발 범위: 2.5
발사체 개수: 8개 (8방향)
발사체 데미지: 2
자폭 거리: 1.5
자폭 준비 시간: 1.0초 (점멸)
드랍: 없음 (자폭 시) / 있음 (처치 시)
```

**AI 패턴**:
1. 플레이어를 빠르게 추적 (이동속도 2.0)
2. **자폭 트리거** (거리 1.5 이내 진입):
   - 자폭 시퀀스 시작 (상태: `Unstoppable`)
   - 1.0초간 제자리에서 빠르게 점멸 (경고)   
3. **폭발 및 발사**:
   - 범위(2.5) 내 폭발 데미지 (5) + 넉백
   - **8방향으로 투사체 발사** (2차 위협)
   - 자신 사망
4. **대응 전략 (Counter-Play)**:
   - 트리거 발동 전에 처치 시 폭발/발사 없이 사망 (안전)

**구현 필요 요소**:
- [x] 범위 데미지 시스템
- [x] 자폭 타이머 및 시퀀스
- [ ] **CC 면역 상태** 구현
- [ ] **폭발 시 투사체 발사** 로직 (Nova Pattern)

---

#### 10. **보급품 (중립)** (SupplyEnemy)
**난이도**: - (중립)  
**구현 상태**: ❌ 미구현 (README TODO: 브로타토 나무)

**특징**:
- 도망 다니는 중립 보상 몹 (브로타토의 나무)
- **전투 역할**: 보너스 목표, 선택적 추격 대상
- **핵심 메커니즘**: 30초 후 소멸, 처치 시 대량 보상

**제안 스탯**:
```
체력: 20
이동속도: 1.8
공격력: 0
드랍: 코인 20개, 다이아몬드 2개, 상자 1개
```

**AI 패턴**:
1. 플레이어로부터 도망 (역추적, 이동속도 1.8)
2. 30초 타이머 시작 (스폰 시)
3. 타이머 종료 시 자동 소멸 (보상 없음)
4. 공격받지 않음 (무적 아님)
5. 직접 공격하지 않음 (공격력 0)
6. 시각 효과: 금색 반짝임, 타이머 UI

**구현 필요 요소**:
- 타이머 시스템
- 역추적 AI
- 특별한 시각 효과 (보물 표시)

---

#### 11. **보스: 거대 슬라임** (BossSlime)
**난이도**: 👑 Boss  
**구현 상태**: ❌ 미구현 (README TODO)

**특징**:
- 특정 웨이브에 등장하는 보스급 적
- **전투 역할**: 웨이브 최종 목표, 패턴 학습 필요
- **핵심 메커니즘**: 3단계 페이즈, 체력별 패턴 변화

**제안 스탯**:
```
체력: 200
이동속도: 0.5
공격력: 5
크기: Large
드랍: 코인 50개, 다이아몬드 5개, 상자 3개
```

**AI 패턴** (페이즈별):

**Phase 1 (100% ~ 66% HP)**:
1. 플레이어 추적 (이동속도 0.5)
2. **점프 공격** (쿨다운 5초)
   - 플레이어 현재 위치 조준
   - 공중으로 점프 (1초)
   - 착지 시 범위(3.0) 데미지 5
   - 착지 지점 시각 표시 (회피 가능)

**Phase 2 (66% ~ 33% HP)**:
1. Phase 1 패턴 유지
2. **투사체 난사** 추가 (쿨다운 8초)
   - 8방향으로 투사체 동시 발사
   - 각 투사체 데미지 3
   - 발사 전 0.5초 경고

**Phase 3 (33% ~ 0% HP)**:
1. Phase 1~2 패턴 유지
2. **소환** 추가 (1회, 체력 33% 도달 시)
   - 작은 슬라임 3마리 소환 (기본 추적형)
3. **돌진** 추가 (쿨다운 6초)
   - 플레이어 방향으로 직선 돌진 (이동속도 3.0)
   - 돌진 거리: 10.0
   - 접촉 시 데미지 5 + 넉백
4. 모든 공격 쿨다운 20% 감소 (빠른 공격)

**구현 필요 요소**:
- 보스 전용 AI 스크립트
- 여러 공격 패턴 구현
- 페이즈 전환 시스템
- 보스 체력바 UI

---

> **� 적 조합 및 웨이브 디자인**  
> 웨이브별 적 구성, 난이도 곡선, 적 시너지 조합 등은 [`Systems/Wave_System.md`](../Systems/Wave_System.md)를 참고하세요.

---

## 🎨 시각적 구분 가이드

### 색상 코딩
- **기본 추적형**: 초록색
- **배회형**: 파란색
- **원거리**: 보라색
- **돌격형**: 빨간색
- **탱커형**: 회색
- **분열형**: 주황색
- **버프형**: 노란색 (빛남)
- **회복형**: 분홍색 (십자 표시)
- **폭발형**: 빨간색 (점멸)
- **보급품**: 금색 (반짝임)
- **보스**: 검은색 + 보라색 오라

### 크기
- **Small**: 배회형, 분열된 적, 폭발형
- **Medium**: 기본형, 원거리, 돌격형, 버프형, 회복형
- **Large**: 탱커형, 보스

---

## 🔧 구현 우선순위

### Phase 1 (즉시 구현)
1. ✅ 기본 추적형 (완료)
2. ✅ 배회형 (완료)
3. ✅ **원거리 공격형** (완료)
4. ✅ **돌격형** (완료)

### Phase 2 (중기)
5. ✅ **분열형** (완료)
6. ❌ 탱커형
7. ✅ **버프형** (완료)
8. ❌ 회복형

### Phase 3 (후기)
9. ❌ 폭발형
10. ❌ 보급품
11. ❌ 보스

---

## 📝 구현 시 고려사항

### 코드 구조
**패턴 기반 재사용 설계** (적 종류별 스크립트 X, 패턴별 재사용 O):

```
EnemyBase.cs (기본 클래스) 
├─ 공통 로직: 이동, 공격, 체력, 드랍
└─ 가상 메서드: MoveCheck(), AttackCheck()

EnemyDataSO (ScriptableObject)
├─ 이동 패턴: Chase(추적), Wander(배회), Flee(도망), Charge(돌진)
├─ 공격 패턴: Melee(근접), Ranged(원거리), Buff(버프), Heal(회복)
└─ 스탯: health, speed, damage, range...

특수 로직 (필요 시만)
├─ 돌진 시스템 (준비/실행/기절)
├─ 버프/회복 시스템 (범위 탐지)
└─ 보스 전용 (페이즈 관리)
```

**구현 방식**:
- **80%의 적**: `EnemyBase` + `EnemyDataSO`로 해결 (데이터만 변경)
- **20%의 적**: 복잡한 로직만 별도 스크립트 (ChargerEnemy, BufferEnemy 등)
- **디자인 패턴**: 전략 패턴, 컴포넌트 패턴 등 고려 (구현 시 결정)

### 밸런싱
- 적 체력 = 플레이어 DPS × 처치 목표 시간
- 적 공격력 = 플레이어 체력의 5~10%
- 드랍량 = 적 위협도에 비례

### 성능 최적화
- 오브젝트 풀링 (적 재사용)
- 화면 밖 적 업데이트 빈도 감소
- 최대 적 수 제한 (README TODO: 스폰 한계)

### 플레이어 피드백
- 명확한 공격 예고 (원거리, 돌격, 폭발)
- 위협도에 따른 시각 효과
- 사운드 큐 (돌진 소리, 폭발 경고음 등)

---

## 📌 다음 단계

1. **원거리 공격형 적 구현**
   - `RangedEnemy.cs` 작성
   - 경고 UI 스프라이트 제작
   - 투사체 프리팹 설정

2. **돌격형 적 구현**
   - `ChargerEnemy.cs` 작성
   - 돌진 준비 이펙트
   - 벽 충돌 처리

3. **적 데이터 ScriptableObject 생성**
   - `EnemyDataSO.cs` 작성
   - 각 적 타입별 데이터 에셋 생성

---

## 📞 문서 관리

### 업데이트 이력
- 2025-12-04: 초안 작성 (11종 적 기획)

### 관련 문서
- `GDD_Overview.md` - 전체 게임 개요
- `Systems/Enemy_System.md` - 적 시스템 상세 (작성 예정)
- `Systems/Wave_System.md` - 웨이브 시스템 상세 (작성 예정)
